parameters:
- name: 'artifactName'
  type: string
  default: ''

steps:
- bash: |
    if [ -z "$ARTIFACT_NAME" ]; then
      echo "##vso[task.logissue type=error;]Missing template parameter \"artifactName\""
      echo "##vso[task.complete result=Failed;]"
    fi
  env:
    ARTIFACT_NAME: ${{parameters.artifactName}}

- download: current
  artifact: '${{parameters.artifactName}}'
  displayName: 'Download nuget packages'

- task: DotNetCoreCLI@2
  inputs:
    command: 'push'
    packagesToPush: '$(Agent.BuildDirectory)/${{parameters.artifactName}}/*.nupkg'
    nuGetFeedType: 'internal'
    publishVstsFeed: '368fd3b5-1cec-432d-937d-f006ee177508/28f11f8b-4d6c-4db4-808d-da3a2097c093'
